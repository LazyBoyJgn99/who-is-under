(this.webpackJsonp=this.webpackJsonp||[]).push([[5],{385:function(e,t,s){"use strict";t.a={localhostUrl:"https://www.jglo.top:8086/",wsHostUrl:"wss://www.jglo.top:8086/"}},386:function(e,t,s){},458:function(e,t,s){"use strict";s.r(t),s.d(t,"default",function(){return H});s(387);var a=s(396),A=(s(388),s(397)),n=(s(389),s(398)),r=s(51),c=s.n(r),i=s(52),u=s.n(i),o=s(53),m=s.n(o),w=s(54),l=s.n(w),g=s(56),f=s.n(g),h=s(55),B=s.n(h),d=s(72),p=s.n(d),D=s(0),M=s.n(D),v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAAFACAMAAAD6TlWYAAAAAXNSR0IArs4c6QAAAIFQTFRFLCYqIiA0RSg8Zjkxj1Y733Em2aBm7sOa+/I2j9JL5+bFuuWPS2kviY+CV4AvPz90MGCCW27hY5v/X83k5+bF////m623hH6HaWpqWVZSdkKKrDIy2Vdj13u6epAuim8wq8Y3GRUTNC0yIx8if6UswMtIuK205+bFfbRQAAAAAAAA6MRs2QAAACt0Uk5TAP///////////////////////////////////////////////////////+X9m5EAAAP4SURBVHic7d3BbhMxFEBRtv0LNkj8/xeyawsyUzvXcRI4d888+0w3TxOJb29KfXv0AV49gDGAMYAxgDGAMYAxgDGAsWnAH+/d8zivF8AYwBjAGMAYwBjAGMAYwBjA2BOscj/fe8VpAGMAYwBjAGMAYwBjAGMAYwBjXwDuGffxlO/vleed7doA4JcBjAGMAYwBjAGMAYwBjAGMJcDZzn5yur7Snpc+G8AYwBjAGMAYwBjAGMAYwBjA2CfA6zWrHGuW98SiNzpLmQswzgUY5wKMcwHGuQDjXIBxLsA4F2CcCzDOfYKft5XWrz77MmdnAIwzAMYZAOMMgHEGwDgDYJwBMM4AGGcAjDNuAJw9wtmPO48KYAxgDGAMYAxgDGAMYAxgDGDs8Cr37+EDjAGMAYwBjAGMAYwBjAGMAYwNAWevuf5J50Szp9pzeoAA/wxgDGAMYAxgDGAMYAxg7AkAz3a/1zD7h3Dd9fkAfhlAgLcGMAYwBjAGMAYwBjD2QoB7jjrbbvLyCQvgG8AcwBjAGMAYwBjAGMAYwNgTAP6/AYwBjAGMAYwBjAGMAYwBjAGMHf6vIctTRl0vdScWTIAxgDGAMYAxgDGAMYAxgDGAsU2r3O7PPKPu9xo+WicH+FsAYwBjAGMAYwBjAGMAYwBjDwOc7X7QJ3hHAYwBjAGMAYwBjAGMAYwBjAGMPdXP22YXqfXXcP3k8vEJ4MLcUQAX5o4CuDB3FMCFuaMALswdBXBh7iiAC3NHAVyYOwrgwtxRRwAftWZdd/0aZlEBArw1gDGAMYAxgDGAMYAxgLHDgLMIZS16xQDGAMYAxgDGAMYAxgDGAMYAxu64yq1/+vloffkbTVt/yvq/ABjnAoxzAca5AONcgHEuwDgXYJwLMM4FGOd+Apy98OOXtfVr3i+AMYAxgDGAMYAxgDGAMYAxgLHtq9z6AvdMHB/N3gPgXwIYAxgDGAMYAxgDGAMYAxjbDnj2mnvWxWuEPTcCCPDvAQR4awBjAGMAYwBjAGP/IODZ1hfCRwUwBjAGMAYwBjAGMAYwBjAGMDYE3P0DtrM/iNu9dF6fHuCXAYwBjAGMAYwBjAGMAYwBjN0AeN3ZA56oLI4A3wDmAMYAxgDGAMYAxgDGAMYOA+4ZXBqR736tswGMAYwBjAGMAYwBjAGMAYwBjA0Bzx7m7Gsoi+PIBeBCAN8A5gDGAMYAxgDGAMYAxo4A7m73oUfkZUYJYAxgDGAMYAxgDGAMYAxgDGBsGvDswvU6AYwBjAGMAYwBjAGMAYwBjAGMbVrldn+GOrGYXf9JzN4IIMBbAxgDGAMYAxgDGAMYAxh7KsD/N4AxgDGAMYAxgDGAMYAxgDGAsV+FTtRI3sWkuQAAAABJRU5ErkJggg==",k=s.p+"img/ffc9ec12f3881dd27b128305a522a5c2.gif",x="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANwAAADcCAMAAAAshD+zAAAAAXNSR0IArs4c6QAAAGZQTFRFAAAAIiA0RSg8Zjkxj1Y733Em2aBm7sOaxb0rj9JLar4wN5RuS2kvUkskMjw5Pz90MGCCUWXWY5v/X83ky9v8////m623hH6HaWpqWVZSdkKKrDIy2Vdj13u6j5dKim8wq6MwIiA0jRz2KAAAACJ0Uk5TAP///////////////////////////////////////////y79k78AAAHsSURBVHic7dmxboMwEIDhZGulDqmU7u37v2Q3TmpProlN6MH3jwSb+2BB5PJ64C57D7BlcFWDqxpc1eCqBlc1uKrBVQ2uanBVg6saXNXgqgZXNbiqDeGuS3OGmb0f3LOGgVsR3LOGgVsR3LOGgVvRJNzIWHN2yYLbdiy4h4Lbdiy4h4Lbdiy4h5qE+1jKRm2XrYWDg4ODg4ODG8fdl2LU29J70j0po8PBwcHBwcHBjeOil6UgxbH2irgxcY2vpewmxK9wcHBwcHBwZ8TFhjHCZ1KGi7IV2XkZ8yMJDg4ODg4O7pi46+riwtlYs8te3WKW7DHAwcHBwcHB1cdlzOxFJ2p/DFo/dOycnRevaW0SHBwcHBwc3DFxGTO6J8WAva9ksSLbL1uRfSqCg4ODg4ODOyMuY2Z/PmWkXmbvn1kRHBwcHBwcHNxP3K2zXmbvTYCDg4ODg4ODG8etvwntYgUcHBwcHBzcGXFvzTJm77GReklwcHBwcHBwR8LF+HHs2llGz45tFxzcr+A2DQ7uV3CbdmZcxqwYXNXgqgZXNbiqnQ+X/bzfiK1ZsgeSBbdncHCNDfcKDq6x4V7B/Y3rZY7QR67RS4KDg4ODg4M7Jm7OCLNHXR8cHBzctODg4P4VrnZwVYOrGlzV4Kp2aNw3jFXpzhnbXpwAAAAASUVORK5CYII=",G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANwAAADcCAMAAAAshD+zAAAAAXNSR0IArs4c6QAAAGBQTFRFAAAAIiA0RSg8Zjkxj1Y733Em2aBm7sOa+/I2j9JLar4wN5RuS2kvUkskMjw5Pz90MGCCW27hY5v/X83ky9v8////m623hH6HaWpqWVZSXTdeWRsbzS0tniMjj5dKim8wRLcLpQAAACB0Uk5TAP////////////////////////////////////////+Smq12AAAB+ElEQVR4nO3YMW7jMBCG0TidgD2Bvb7/NVMEyBT5MUtZMrSU3ldKJDWPaYx8LCfu4+gB3hncrMHNGtyswc0a3KzBzRrcrMHNGtysvRF3a0vr9p4A7rXgFrgXg3stuAXuxeDWVKPef+pJcC8Ftya4BW5zcGuCW+A2txNuPalfl3asvw44ODg4ODg4uO8+f+rH6kddfwlwcHBwcHBw18GtH6Z6hJ5tW0hpHRwcHBwcHNyZcGnUeyhBatS/oVqX3tbeUVx/5XBwcHBwcHBnwvXH1L+AaoSeVG8fg32G+iuHg4ODg4ODuyIuMevoRKpq6H5d2nEP9XQ4ODg4ODi4c+LSwluoPpd+fo2S0vjplFESHBwcHBwc3NlxPSnhelLaW6Omt+m8ngQHBwcHBwd3dlz/4WcoDTN6SvqBlZhwcHBwcHBwV8QlZvVoK9Lo0P2OtA4ODg4ODg7u2rjE7HE14BZmVW/rFDg4ODg4OLgr4v603dqKmZ49Q+kS0rNREhwcHBwcHNyZcDV+PeshVaKPXsc+wcH9Cu6twcH9Cu6tXRmXmDMGN2twswY3a3Czdj1cen3ciN0s6Q+SgjsyOLjmwKOCg2sOPCq4f+NGmVvoW74xSoKDg4ODg4M7J26fEfYedX1wcHBwuwUHB/df4eYObtbgZg1u1uBm7dS4L9keutkZfx5XAAAAAElFTkSuQmCC",y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAAFACAMAAAD6TlWYAAAAAXNSR0IArs4c6QAAAIFQTFRFLCYqIiA0RSg8Zjkxj1Y733Em2aBm7sOa+/I2j9JL5+bFuuWPS2kviY+CV4AvPz90MGCCW27hY5v/X83k5+bF////m623hH6HaWpqWVZSdkKKrDIy2Vdj13u6epAuim8wq8Y3GRUTNC0yIx8if6UswMtIuK205+bFfbRQAAAAAAAA6MRs2QAAACt0Uk5TAP///////////////////////////////////////////////////////+X9m5EAAASrSURBVHic7dxBbiRHDATAvdr6hC8G/P8XGvBBBRhsDtnZGmu9kcdVFysZvRdBGv347a35aPN7kf1z1W3TydWUPj++guk6AMMADAMwDMAwAMMADAMwDMAw/0PA/ZF9pmx9lz1gMmWKChAgQICvAjAMwDAAwwAMAzDMLwL4DOUUa796j/BM56pfzwvwYh7AW50Bhp0Bhp0Bhp0Bhp0Bhp0Bhp0Bhp1vAPZf3hNNsarn9g2S1/AML0CAAAECBAgQIECAADPA6cIJ1r5gcu/TlFVngAABAgQIECBAgAABZoDTgnusPz8zrTW9LXlxJ398pm9VBSBAgAABAgQIECBAgHcAqzLVxXveaf0qz7zWfkoPPb0NIECAAAECBAgQIECAdwD7I9Xo841Zv9y0apX+uf1te/LpZIAAAQKsq/YXAwT4TwACBAiwrtpf/AsD9itNS/eof31mekc/r0eYTjk5JwAupgC8CECA/74D4AdAgM3mAG9NAXgRgN8DcE85/bWwPeU0/bx9q/1ZgAABAgQIECBAgAABvhuwz7Rqzzs9UfWrfvy1Zzv/TQACBAgQIECAAAECBPi9AE/V/ZSPYfarn/Rnqx9hTfcACBAgQIAAAQIECBDg84B7yn7hvup7u+xfK0CAAAECBAgQIECAAL8SsK9Qje6fe5ptunp1Yr9bfxtAgAABAgQIECBAgACfAtzX7y/Zp793unDFBhAgQIAAAQIECBAgwO8AWB2pDk+X6+edD63sX8j+RPK6egOAAAECBAgQIECAAAFmgFWt/siUMkmFsD9xUn0QqNqjp6zuAAjw+gRAgHcDMAzAMADDAAwDMMxPBNgj9LX2lFWZ6mx1xxT/6aa9BkCAAAECBAgQIECAADPAhHJ/ol+pOts/N0Wovrq/7QQgQIAAAQIECBAgQIAZYH/4ZPrcFDAhOmf7X5ybslV/nAAgQIAAAQIECBAgQIDPA1YVpkT96GnpKj1gP2XfOXmtAAECBAgQIECAAAECzAD3ZSqY8xr6s+eO/o8kJ6snqNUdAAECBAgQIECAAAECfA9gX6G/blq/OnE+ot/f23eevsw+1eTzVYAAAQIECBAgQIAAAX4lYM8xXaki36+0v63nmHap7gV48RzAi6bT5wBeNJ0+B/Ci6fQ5gBdNp88BvGg6fQ7gRdPpcwAvmk6fA3jRdPrc44D96tVXz9n+G7N+SvXcnm1KvkcFCBAgQIAAAQIECBDgHcBqdLXIdGB/dr/c9Ll+8rTflBfgRQBeTAYI8HpKXx/gyyl9fYAvp/T1Ab6c0tcH+HJKXx/gyyl9/Z8IcI+VJOHovzWczkv6nQC81Q9g2A9g2A9g2A9g2A9g2A9g2A9g2A9g2K8E7MdU/7bHr2qdj8NMAfs7pmz79lUAAgQIECBAgAABAgR4B3APUyFUpb9u4ely79gIYLgRwHAjgOFGAMONAIYbAQw3AhhuBDDcCGC4UflDpWrMPtPSCdEe65ndTgCGARgGYBiAYQCGARgGYBiAYQCG+ULAKlPKZ7DesRHAMADDAAwDMAzAMADDAAwDMAzAMDf+DPLTmQL+V0R9AIYBGAZgGIBhAIYBGAZgGIBhAIb5G9p6jUW7HVZ3AAAAAElFTkSuQmCC",C=s(385);s(386);document.body.style.background="#999999";var Y=window.innerWidth,S=window.innerHeight,E=Y/20,b=S/20,j=E<b?E:b;document.addEventListener("touchmove",function(e){e.preventDefault()},!1);var H=function(e){function t(){var e,s;c()(this,t);for(var a=arguments.length,A=new Array(a),r=0;r<a;r++)A[r]=arguments[r];return s=m()(this,(e=l()(t)).call.apply(e,[this].concat(A))),p()(f()(s),"ws",null),p()(f()(s),"state",{num:0,key:!0,text:[],win:!1,winner:"",name:"",username:"",password:"",visible:!1,msg:"",x:5,y:5,step:"1",seat:0,seat1:{username:"",status:0},seat2:{username:"",status:0},map:[[1,0,1,0,2,0,1,0,2,0,1],[0,0,2,0,2,0,1,0,2,0,1],[0,0,1,0,0,0,0,0,1,0,1],[0,0,1,0,2,0,1,0,2,0,0],[0,1,1,0,2,0,1,0,2,0,1],[0,0,0,0,0,0,0,0,2,0,0],[0,0,1,0,2,0,0,0,0,0,1],[1,0,1,0,0,0,1,0,2,1,1],[0,0,0,0,0,0,1,0,2,0,1],[0,0,1,0,0,0,1,0,0,0,0],[0,1,1,0,2,0,1,0,2,0,1]]}),p()(f()(s),"onKeyDown",function(e){if(console.log(e.keyCode),s.ws)s.state.key&&(!0===s.state.win?s.ws.send("winM"+e.keyCode):s.state.seat+""===s.state.step&&s.setState({key:!1},function(){s.ws.send("move"+e.keyCode)}));else{var t=s.state.map;switch(t[s.state.y][s.state.x]=-1,s.setState({map:t}),e.keyCode){case 37:s.state.x>0&&s.setState({x:s.state.x-1});break;case 39:s.state.x<10&&s.setState({x:s.state.x+1});break;case 38:s.state.y>0&&s.setState({y:s.state.y-1});break;case 40:s.state.y<10&&s.setState({y:s.state.y+1})}}}),p()(f()(s),"step",function(){"1"===s.state.step?s.setState({step:"2"}):s.setState({step:"1"})}),p()(f()(s),"checkNet",function(e,t){return s.state.map[t][e]<0&&(s.state.seat+""===s.state.step&&n.a.warn("被蛛网封住了"),!0)}),p()(f()(s),"checkNum",function(e,t){var a=0;a+=10===t||s.state.map[t+1][e]<=0?0:1,a+=0===t||s.state.map[t-1][e]<=0?0:1,a+=0===e||s.state.map[t][e-1]<=0?0:1,a+=10===e||s.state.map[t][e+1]<=0?0:1,a+=10===t||0===e||s.state.map[t+1][e-1]<=0?0:1,a+=0===t||10===e||s.state.map[t-1][e+1]<=0?0:1,a+=0===e||0===t||s.state.map[t-1][e-1]<=0?0:1,a+=10===e||10===t||s.state.map[t+1][e+1]<=0?0:1,s.setState({num:a})}),p()(f()(s),"checkStep",function(e,t){var a,A=10===t||s.state.map[t+1][e]<0,r=0===t||s.state.map[t-1][e]<0,c=0===e||s.state.map[t][e-1]<0,i=10===e||s.state.map[t][e+1]<0,u=s.state.text;if(s.state.map[t][e]>0)switch(s.state.step){case"2":return a="游戏结束！玩家："+s.state.seat2.username+"获胜！",u.unshift(M.a.createElement("div",{style:{color:"#8A2BE2"}},a)),s.setState({winner:s.state.seat2.username,seat1:{username:"",status:0},seat:1===s.state.seat?0:s.state.seat,win:s.state.name===s.state.seat2.username,text:u}),n.a.success(a),!0;case"1":return a="游戏结束！玩家："+s.state.seat1.username+"获胜！",u.unshift(M.a.createElement("div",{style:{color:"#8A2BE2"}},a)),s.setState({winner:s.state.seat1.username,seat2:{username:"",status:0},seat:2===s.state.seat?0:s.state.seat,win:s.state.name===s.state.seat1.username,text:u}),n.a.success(a),!0;default:return!1}else if(A&&c&&r&&i)switch(s.state.step){case"1":return a="游戏结束！玩家："+s.state.seat2.username+"获胜！",u.unshift(M.a.createElement("div",{style:{color:"#8A2BE2"}},a)),s.setState({winner:s.state.seat2.username,seat1:{username:"",status:0},seat:1===s.state.seat?0:s.state.seat,win:s.state.name===s.state.seat2.username,text:u}),n.a.success(a),!0;case"2":return a="游戏结束！玩家："+s.state.seat1.username+"获胜！",u.unshift(M.a.createElement("div",{style:{color:"#8A2BE2"}},a)),s.setState({winner:s.state.seat1.username,seat2:{username:"",status:0},seat:2===s.state.seat?0:s.state.seat,win:s.state.name===s.state.seat1.username,text:u}),n.a.success(a),!0;default:return!1}}),p()(f()(s),"mapStart",function(){var e,t,a=[];for(e=0;e<11;e++){var A=[];for(t=0;t<11;t++){var n=100*Math.random();n<5?A.push(2):n<10?A.push(1):A.push(0)}a.push(A)}if(s.ws){var r=s.state.seat1,c=s.state.seat2;r.status=0,c.status=0,s.ws.send("map0"+JSON.stringify({x:5,y:5,map:a,seat1:r,seat2:c,step:"1",again:!0}))}}),p()(f()(s),"winnerMove",function(e){var t=s.state.map,a=s.state.y,A=s.state.x;switch(t[a][A]=-1,s.setState({map:t,key:!0}),e){case"37":A>0&&(s.setState({x:A-1}),s.checkNum(A-1,a));break;case"39":A<10&&(s.setState({x:A+1}),s.checkNum(A+1,a));break;case"38":a>0&&(s.setState({y:a-1}),s.checkNum(A,a-1));break;case"40":a<10&&(s.setState({y:a+1}),s.checkNum(A,a+1))}}),p()(f()(s),"userMove",function(e){console.log(e);var t=s.state.map,a=s.state.y,A=s.state.x;switch(t[a][A]=-1,s.setState({map:t,key:!0}),e){case"37":if(A>0){if(s.checkNet(A-1,a))return;s.step(),s.checkStep(A-1,a),s.setState({x:s.state.x-1}),s.checkNum(A-1,a)}break;case"39":if(A<10){if(s.checkNet(A+1,a))return;s.step(),s.checkStep(A+1,a),s.setState({x:A+1}),s.checkNum(A+1,a)}break;case"38":if(a>0){if(s.checkNet(A,a-1))return;s.step(),s.checkStep(A,a-1),s.setState({y:a-1}),s.checkNum(A,a-1)}break;case"40":if(a<10){if(s.checkNet(A,a+1))return;s.step(),s.checkStep(A,a+1),s.setState({y:a+1}),s.checkNum(A,a+1)}}}),p()(f()(s),"showModal",function(){s.setState({visible:!0})}),p()(f()(s),"handleOk",function(e){console.log(e),s.login(),s.setState({visible:!1})}),p()(f()(s),"handleCancel",function(e){console.log("退出",e),s.setState({visible:!1})}),p()(f()(s),"login",function(){var e=C.a.localhostUrl+"user/login";fetch(e,{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({username:s.state.username,password:s.state.password})}).then(function(e){return e.json()}).then(function(e){var t=e;console.log(t),t.status?(n.a.success(t.message),s.setState({name:t.data.username})):n.a.error(t.message)}).catch(function(){console.log("fetch fail")})}),p()(f()(s),"usernameChange",function(e){s.setState({username:e.target.value})}),p()(f()(s),"passwordChange",function(e){s.setState({password:e.target.value})}),p()(f()(s),"userJoin",function(){if(s.ws);else{var e=s.state.name;if(""===e)return alert("请先登陆"),null;var t=C.a.wsHostUrl+"game3/"+e,a=f()(s);s.ws=new WebSocket(t),s.ws.onopen=function(){console.log("建立 websocket 连接..."),a.userSetAll()},s.ws.onmessage=function(e){console.log(e);var t,s=e.data,A=e.data.substring(0,4),n=s.slice(4);switch(console.log(A),A){case"data":break;case"winM":a.winnerMove(n);break;case"move":a.userMove(n);break;case"msg0":(t=a.state.text).unshift(n),a.setState({text:t});break;case"ok01":a.setState({seat1:JSON.parse(n).seat});break;case"ok02":a.setState({seat2:JSON.parse(n).seat});break;case"map0":var r=JSON.parse(n);a.setState({x:r.x+0,y:r.y+0,map:r.map,seat1:r.seat1,seat2:r.seat2,step:r.step},function(){r.again&&(a.checkNum(5,5),a.setState({win:!1}))});break;case"seta":a.flashRoom();break;case"out1":a.state.seat1.username===n?a.setState({seat1:{username:"",status:0}}):a.state.seat2.username===n&&a.setState({seat2:{username:"",status:0}}),console.log("delete",n);break;default:(t=a.state.text).unshift(n),a.setState({text:t})}},s.ws.onclose=function(){console.log("用户["+e+"] 已经离开房间!"),console.log("关闭 websocket 连接...")}}}),p()(f()(s),"userSend",function(){s.setState({msg:""}),s.ws&&""!==s.state.msg&&s.ws.send("msg0"+s.state.name+":"+s.state.msg)}),p()(f()(s),"flashRoom0",function(){if(s.ws){var e=s.state;s.ws.send("map0"+JSON.stringify({x:e.x,y:e.y,map:e.map,seat1:e.seat1,seat2:e.seat2,step:e.step}))}}),p()(f()(s),"flashRoom",function(){(1===s.state.seat||""===s.state.seat1.username&&2===s.state.seat)&&s.flashRoom0()}),p()(f()(s),"userSetAll",function(){s.ws&&s.ws.send("seta")}),p()(f()(s),"userExit",function(){s.ws&&(s.ws.close(),s.ws=null,s.setState({seat2:{username:"",status:0},seat1:{username:"",status:0},seat:0}))}),p()(f()(s),"getImg",function(e,t,a){if(s.state.x===t&&s.state.y===a)return k;if(e===s.state.seat&&0!==s.state.seat)return v;switch(e){case 0:return v;case 1:return G;case 2:return x;case-1:return y;default:return v}}),p()(f()(s),"join1",function(){if(""===s.state.name)n.a.error("请先登录");else if(""!==s.state.seat1.username)n.a.error("位置上有人咯");else if(2!==s.state.seat){if(s.ws){var e=s.state;s.ws.send("map0"+JSON.stringify({x:e.x,y:e.y,map:e.map,seat1:{username:s.state.name,status:0},seat2:e.seat2,step:s.state.step}))}s.setState({seat:1,win:!1})}else{if(s.ws){var t=s.state;s.ws.send("map0"+JSON.stringify({x:t.x,y:t.y,map:t.map,seat2:{username:"",status:0},seat1:{username:s.state.name,status:0},step:s.state.step}))}s.setState({seat:1,win:!1})}}),p()(f()(s),"join2",function(){if(""===s.state.name)n.a.error("请先登录");else if(""!==s.state.seat2.username)n.a.error("位置上有人咯");else if(1!==s.state.seat){if(s.ws){var e=s.state;s.ws.send("map0"+JSON.stringify({x:e.x,y:e.y,map:e.map,seat1:e.seat1,seat2:{username:s.state.name,status:0},step:s.state.step}))}s.setState({seat:2,win:!1})}else{if(s.ws){var t=s.state;s.ws.send("map0"+JSON.stringify({x:t.x,y:t.y,map:t.map,seat1:{username:"",status:0},seat2:{username:s.state.name,status:0},step:s.state.step}))}s.setState({seat:2,win:!1})}}),p()(f()(s),"ready",function(){var e;switch(s.state.seat){case 1:if(1===(e=s.state.seat1).status)return;if(1===s.state.seat2.status)return void s.mapStart();e.status=1,s.ws&&s.ws.send("ok01"+JSON.stringify({seat:e}));break;case 2:if(1===(e=s.state.seat2).status)return;if(1===s.state.seat1.status)return void s.mapStart();e.status=1,s.ws&&s.ws.send("ok02"+JSON.stringify({seat:e}));break;default:return}}),s}return B()(t,e),u()(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown),document.oncontextmenu=function(){return!1},document.onselectstart=function(){return!1},document.onmousewheel=function(){return!1},document.body.style.cssText="overflow-x: hidden;overflow-y: hidden;"+document.body.style.cssText}},{key:"componentWillUnmount",value:function(){this.userExit(),document.removeEventListener("keydown",this.onKeyDown)}},{key:"render",value:function(){var e=this,t=this.getImg,s=this.state.seat1.status+this.state.seat2.status;return M.a.createElement("div",{className:"demo3"},M.a.createElement("button",{onClick:this.userJoin},"进入房间"),M.a.createElement("button",{onClick:this.userExit},"离开房间"),M.a.createElement("button",{onClick:this.showModal},""===this.state.name?"登录":this.state.name),M.a.createElement("br",null),M.a.createElement("div",{style:{fontSize:20}},"Winner:",this.state.winner),M.a.createElement("div",null,"游戏规则:用键盘⬆️⬇️⬅️➡️控制小蜘蛛，不要撞到炸弹(死亡)或者被蛛网围住(对手死亡)️"),M.a.createElement("div",null,"双方玩家各自只能看到一半的地雷"),"️",M.a.createElement("button",{onClick:this.join1},"1"===this.state.step?"😊":"",""===this.state.seat1.username?"空座位1":this.state.seat1.username),M.a.createElement("button",{onClick:this.ready},"准备",s,"/2"),M.a.createElement("button",{onClick:this.join2},""===this.state.seat2.username?"空座位2":this.state.seat2.username,"2"===this.state.step?"😊":""),M.a.createElement(a.a,{title:"登录",visible:this.state.visible,onOk:this.handleOk,okText:"登录/注册",onCancel:this.handleCancel,cancelText:"返回"},M.a.createElement(A.a,{placeholder:"username",value:this.state.username,onChange:this.usernameChange}),M.a.createElement("br",null),M.a.createElement("br",null),M.a.createElement(A.a,{type:"password",placeholder:"password",value:this.state.password,onChange:this.passwordChange})),M.a.createElement("div",{style:{fontSize:20}},"周围地雷数量:",this.state.num),this.state.map.map(function(e,s){return M.a.createElement("div",{key:s,style:{textAlign:"center",height:j}},e.map(function(e,a){return M.a.createElement("img",{alt:"gelumu",src:t(e,a,s),key:a,width:j,height:j,style:{borderRight:"1px solid #333",borderBottom:"1px solid #333"}})}))}),M.a.createElement("br",null),M.a.createElement(A.a,{value:this.state.msg,onChange:function(t){e.setState({msg:t.target.value})},onPressEnter:this.userSend,style:{width:200}}),M.a.createElement("button",{onClick:this.userSend,style:{}},"发言"),M.a.createElement("br",null),M.a.createElement("div",{style:{top:50,overflowY:"scroll",width:6*j,height:16*j,position:"absolute"}},this.state.text.map(function(e,t){return M.a.createElement("div",{style:{textAlign:"left"},key:t},e)})),M.a.createElement("br",null),S>Y?M.a.createElement("div",null,M.a.createElement("button",{style:{width:2*j,height:2*j},onClick:function(){e.onKeyDown({keyCode:38})}},"上"),M.a.createElement("br",null),M.a.createElement("button",{style:{width:2*j,height:2*j,marginRight:2*j},onClick:function(){e.onKeyDown({keyCode:37})}},"左 ️"),M.a.createElement("button",{style:{width:2*j,height:2*j},onClick:function(){e.onKeyDown({keyCode:39})}},"右"),M.a.createElement("br",null),M.a.createElement("button",{style:{width:2*j,height:2*j},onClick:function(){e.onKeyDown({keyCode:40})}},"下 ️")):"")}}]),t}(D.Component)}}]);